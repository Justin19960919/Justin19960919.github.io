{% assign width = include.width | default: "100%" %}
{% assign height = include.height | default: "auto" %}
{% assign align = include.align | default: "center" %}

<figure class="post-image" style="text-align: {{ align }}; margin: 1.5em 0;">
    <img src="{{ include.src | relative_url }}" alt="{{ include.alt | default: include.title | default: 'Image' }}"
        style="width: {{ width }}; 
              height: {{ height }}; 
              max-width: 100%; 
              {% if include.border %}border: {{ include.border }};{% endif %}
              {% if include.shadow %}box-shadow: 0 4px 8px rgba(0,0,0,0.1);{% endif %}
              {% if include.rounded %}border-radius: {{ include.rounded }};{% endif %}" />
    {% if include.caption %}
    <figcaption style="font-size: 0.85em; color: #666; margin-top: 0.5em; font-style: italic;">
        {{ include.caption }}
    </figcaption>
    {% endif %}
</figure>